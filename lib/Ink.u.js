// Ink.js
// By Daniel R. (sadasant.com)
// License: http://opensource.org/licenses/mit-license.php
// Homepage: https://github.com/sadasant/Ink.js
~function(e,t,n,r){function w(){if(d)return c(w);c(w);var e;for(e in i)i[e]&&(a.save(),i[e].draw(),a.restore());l.drawImage(u,0,0)}function E(e){i[e.id]=e}function S(e){e&&(o[o.length]=e.id,delete i[e.id])}function T(e,t,n,r,i,o){var u=Object.create(x.geometrics);return u.id=(++s).toString(),u.x=e,u.y=t,u.width=n,u.height=r,u.fill=i||"rgba(0, 0, 0, 0.2)",u.stroke=o||"rgba(0, 0, 0, 0.2)",u.rotation=0,u.speed={x:0,y:0},u.maxSpeed={x:10,y:10},u.infiniteScope=null,u.colliders=[],u.afterDraw=undefined,u.draw=function(){this.infiniteScope&&this.foreverInScope(),(this.speed.x||this.speed.y)&&this.repos(),a.translate(this.x,this.y),this.rotation&&a.rotate(this.rotation),this.colliders.length&&this.collide(),a.fillStyle=this.fill,a.strokeStyle=this.stroke,a.fillRect(this.x,this.y,this.width,this.height),this.afterDraw&&this.afterDraw()},u}function N(e,t,n,r,i){var o=Object.create(x.geometrics);return o.id=(++s).toString(),o.x=e||0,o.y=t||0,o.r=n||0,o.fill=r||"rgba(255, 255, 255, 0.3)",o.stroke=i||"rgba(255, 255, 255, 1)",o.rotation=0,o.speed={x:0,y:0},o.maxSpeed={x:10,y:10},o.infiniteScope=null,o.colliders=[],o.draw=function(){this.infiniteScope&&this.foreverInScope(),(this.speed.x||this.speed.y)&&this.repos(),a.translate(this.x,this.y),this.rotation&&a.rotate(this.rotation),this.colliders.length&&this.collide(),a.fillStyle=this.fill,a.strokeStyle=this.stroke,a.beginPath(),a.arc(0,0,this.r,0,m),a.closePath(),a.stroke(),a.fill()},o}function C(e,t,n,r,i){var o=Object.create(x.geometrics);return o.id=(++s).toString(),o.x=e,o.y=t,o.v=n||[],o.fill=r||"rgba(255, 255, 255, 0.3)",o.stroke=i||"rgba(255, 255, 255, 1)",o.rotation=0,o.speed={x:0,y:0},o.maxSpeed={x:10,y:10},o.infiniteScope=null,o.colliders=[],o.draw=function(){this.infiniteScope&&this.foreverInScope(),(this.speed.x||this.speed.y)&&this.repos(),a.translate(this.x,this.y),this.rotation&&a.rotate(this.rotation),this.colliders.length&&this.collide(),a.fillStyle=this.fill,a.strokeStyle=this.stroke,a.beginPath();var e=0,t=this.v.length;for(;e<t;e++)e?a.lineTo(this.v[e][0],this.v[e][1]):a.moveTo(this.v[e][0],this.v[e][1]);a.closePath(),a.stroke(),a.fill()},o}function k(e,t,n,r,i,s,o){var u;return e==="LINEAR"?u=a.createLinealGradient(t,n,r,i):e==="RADIAL"&&(u=a.createRadialGradient(t,n,r,i,s,o)),u.colors=x.grad.colors,u}function L(){d=!1,p||(p=!0,w())}function A(e,n,r,c){d=!0,i={},s=0,o=[],this.dcan=f=this.dcan||t.getElementById(e||"canvas"),this.dcon=l=this.dcon||f.getContext("2d"),this.can=u=this.can||t.createElement("canvas"),this.con=a=this.con||u.getContext("2d"),u.height=f.height=r||h.h,u.width=f.width=n||h.w;if(!n||!r)t.body.style.overflow="hidden",f.style.margin="-8px -8px";return this.center={x:h.w/2,y:h.h/2},c=c!==undefined?c:"rgba(0, 0, 0, 1)",c&&O.draw(new O.Rect(0,0,u.width,u.height,c),1),setTimeout(L,this.frame<<2)}var i={},s=0,o=[],u,a,f,l,c,h,p,d,v=n.PI/180,m=n.PI*2,g=n.cos,y=n.sin,b=n.abs;c=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){e.setTimeout(t,1e3/60)}}().bind(e),h=function(){return{w:e.innerWidth||t.documentElement&&t.documentElement.offsetWidth||t.body&&t.body.offsetWidth||630,h:e.innerHeight||t.documentElement&&t.documentElement.offsetHeight||t.body&&t.body.offsetHeight||460}}();var x={geometrics:{foreverInScope:function(){this.x>u.width-10&&(this.x-=u.width),this.x<-10&&(this.x+=u.width-10),this.y>u.height&&(this.y-=u.height),this.y<-10&&(this.y+=u.height)},rotateTo:function(e){this.rotation=e*v},accel:function(e,t){t&&(this.maxSpeed.x=t,this.maxSpeed.y=t);if(this.rotateInEdge){var n=this.rotation,r=-e*y(n),i=e*g(n);this.speed.x+=r,this.speed.y+=i}else this.speed.x+=e,this.speed.y+=e;var s={x:b(this.speed.x),y:b(this.speed.y)};s.x>this.maxSpeed.x&&(this.speed.x=s.x/this.speed.x*this.maxSpeed.x),s.y>this.maxSpeed.y&&(this.speed.y=s.y/this.speed.y*this.maxSpeed.y)},stop:function(){this.speed.x=0,this.speed.y=0},repos:function(){if(this.rotateInEdge)this.x-=this.speed.x,this.y-=this.speed.y;else{var e=this.rotation;this.x+=this.speed.x*y(e),this.y-=this.speed.y*g(e)}},addCollider:function(e){this.colliders[this.colliders.length]=e},onCollide:function(){this.fill="rgba(255, 0, 0, 0.3)",this.stroke="rgba(255, 0, 0, 1)"},collideArea:15,collide:function(){var e=this.colliders,t,n=0,r=e.length,i,s;for(;n<r;n++)if(t=e[n])i=b(t.x-this.x),s=b(t.y-this.y),i<this.collideArea&&s<this.collideArea&&(~o.indexOf(t.id)?delete this.colliders[n]:this.onCollide(t))}},grad:{colors:function(e){var t=0,n=e.length;for(;t<n;t++){var r=e[t];this.addColorStop(r[0],r[1])}return this}}},O=e.Ink={VERSION:"0.3.13",can:null,con:null,init:A,draw:E,remove:S,Path:C,Rect:T,Circ:N,grad:k,frame:31,reqAF:c}}(window,document,Math);