// Ink.js
// By Daniel R. (sadasant.com)
// License: http://opensource.org/licenses/mit-license.php
// Homepage: https://github.com/sadasant/Ink.js
~function(a,b,c,d){function p(){return{w:a.innerWidth||b.documentElement&&b.documentElement.offsetWidth||b.body&&b.body.offsetWidth||630,h:a.innerHeight||b.documentElement&&b.documentElement.offsetHeight||b.body&&b.body.offsetHeight||460}}function q(){j(q);for(var a in e)e[a]&&(i.save(),e[a].draw(),i.restore())}function r(a){e[a.id]=a}function s(a){a&&(g[g.length]=a.id,delete e[a.id])}function t(a,b){for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}function v(a,b,c,d,e,g){t(u.geometrics,this),this.id=(++f).toString(),this.x=a,this.y=b,this.width=c,this.height=d,this.fill=e||"rgba(0, 0, 0, 0.2)",this.stroke=g||"rgba(0, 0, 0, 0.2)",this.rotation=0,this.speed={x:0,y:0},this.maxSpeed={x:10,y:10},this.infiniteScope=null,this.colliders=[],this.afterDraw=undefined,this.draw=function(){this.infiniteScope&&this.foreverInScope(),(this.speed.x||this.speed.y)&&this.repos(),i.translate(this.x,this.y),this.rotation&&i.rotate(this.rotation),this.colliders.length&&this.collide(),i.fillStyle=this.fill,i.strokeStyle=this.stroke,i.fillRect(this.x,this.y,this.width,this.height),this.afterDraw&&this.afterDraw()}}function w(a,b,c,d,e){t(u.geometrics,this),this.id=(++f).toString(),this.x=a||0,this.y=b||0,this.r=c||0,this.fill=d||"rgba(255, 255, 255, 0.3)",this.stroke=e||"rgba(255, 255, 255, 1)",this.rotation=0,this.speed={x:0,y:0},this.maxSpeed={x:10,y:10},this.infiniteScope=null,this.colliders=[],this.draw=function(){this.infiniteScope&&this.foreverInScope(),(this.speed.x||this.speed.y)&&this.repos(),i.translate(this.x,this.y),this.rotation&&i.rotate(this.rotation),this.colliders.length&&this.collide(),i.fillStyle=this.fill,i.strokeStyle=this.stroke,i.beginPath(),i.arc(0,0,this.r,0,l),i.closePath(),i.stroke(),i.fill()}}function x(a,b,c,d,e){t(u.geometrics,this),this.id=(++f).toString(),this.x=a,this.y=b,this.v=c||[],this.fill=d||"rgba(255, 255, 255, 0.3)",this.stroke=e||"rgba(255, 255, 255, 1)",this.rotation=0,this.speed={x:0,y:0},this.maxSpeed={x:10,y:10},this.infiniteScope=null,this.colliders=[],this.draw=function(){this.infiniteScope&&this.foreverInScope(),(this.speed.x||this.speed.y)&&this.repos(),i.translate(this.x,this.y),this.rotation&&i.rotate(this.rotation),this.colliders.length&&this.collide(),i.fillStyle=this.fill,i.strokeStyle=this.stroke,i.beginPath();for(var a=0,b=this.v.length;a<b;a++)a?i.lineTo(this.v[a][0],this.v[a][1]):i.moveTo(this.v[a][0],this.v[a][1]);i.closePath(),i.stroke(),i.fill()}}function y(a,b,c,d,e,f,g){var h;return a=="LINEAR"?h=i.createLinealGradient(b,c,d,e):a=="RADIAL"&&(h=i.createRadialGradient(b,c,d,e,f,g)),h.colors=u.grad.colors,h}function z(a,c,d,j){e={},f=0,g=[],this.can=h=this.can||b.getElementById(a||"canvas"),this.con=i=this.con||h.getContext("2d");var k=p();h.width=c||k.w,h.height=d||k.h;if(!c||!d)b.body.style.overflow="hidden",h.style.margin="-8px -8px";this.center={x:k.w/2,y:k.h/2},j=j!==undefined?j:"rgba(0, 0, 0, 1)",j&&A.draw(new A.Rect(0,0,h.width,h.height,j),1),this.started||(q(),this.started=!0)}var e={},f=0,g=[],h,i,j,k=c.PI/180,l=c.PI*2,m=c.cos,n=c.sin,o=c.abs;j=function(){return a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)}}().bind(a);var u={geometrics:{foreverInScope:function(){this.x>h.width-10&&(this.x-=h.width),this.x<-10&&(this.x+=h.width-10),this.y>h.height&&(this.y-=h.height),this.y<-10&&(this.y+=h.height)},rotateTo:function(a){this.rotation=a*k},accel:function(a,b){b&&(this.maxSpeed.x=b,this.maxSpeed.y=b);if(this.rotateInEdge){var c=this.rotation,d=-a*n(c),e=a*m(c);this.speed.x+=d,this.speed.y+=e}else this.speed.x+=a,this.speed.y+=a;var f={x:o(this.speed.x),y:o(this.speed.y)};f.x>this.maxSpeed.x&&(this.speed.x=f.x/this.speed.x*this.maxSpeed.x),f.y>this.maxSpeed.y&&(this.speed.y=f.y/this.speed.y*this.maxSpeed.y)},stop:function(){this.speed.x=0,this.speed.y=0},repos:function(){if(this.rotateInEdge)this.x-=this.speed.x,this.y-=this.speed.y;else{var a=this.rotation;this.x+=this.speed.x*n(a),this.y-=this.speed.y*m(a)}},addCollider:function(a){this.colliders[this.colliders.length]=a},onCollide:function(){this.fill="rgba(255, 0, 0, 0.3)",this.stroke="rgba(255, 0, 0, 1)"},collideArea:15,collide:function(){var a=this.colliders,b;for(var c=0,d=a.length;c<d;c++)if(b=a[c]){var e=o(b.x-this.x),f=o(b.y-this.y);e<this.collideArea&&f<this.collideArea&&(~g.indexOf(b.id)?delete this.colliders[c]:this.onCollide(b))}}},grad:{colors:function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];this.addColorStop(d[0],d[1])}return this}}},A=a.Ink={VERSION:"0.3.13",can:null,con:null,init:z,draw:r,remove:s,fork:t,Path:x,Rect:v,Circ:w,grad:y,frame:31,reqAF:j}}(window,document,Math);